{"version":3,"file":"component---src-pages-add-recipe-js-723866b56f95c8d96588.js","mappings":"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","sources":["webpack://slurp-recipes/./src/components/molecules/LoadingPopup/LoadingPopup.js","webpack://slurp-recipes/./src/components/organisms/NotificationPopup/NotificationPopup.js","webpack://slurp-recipes/./src/pages/addRecipe.js"],"sourcesContent":["import React from \"react\"\nimport styled, { keyframes } from \"styled-components\"\n\nconst spinner = keyframes`\nfrom {\n    transform: rotate(0deg);\n}\nto {\n    transform: rotate(360deg);\n}\n`\n\nexport const Circle = styled.span`\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  height: 60px;\n  width: 60px;\n  border: 18px solid;\n  border-color: ${({ theme }) => theme.colors.accent} transparent\n    ${({ theme }) => theme.colors.accent} transparent;\n  background-color: ${({ theme }) => theme.colors.white};\n  padding: 2rem;\n  border-radius: 100%;\n  animation: 1.5s linear infinite ${spinner};\n`\n\nexport const LoadingText = styled.p`\n  font-size: 2.4rem;\n`\n\nconst LoadingPopup = () => {\n  return (\n    <>\n      <Circle />\n    </>\n  )\n}\n\nexport default LoadingPopup\n","import React from \"react\"\nimport styled from \"styled-components\"\nimport Button from \"../../atoms/Button/Button\"\nimport { AiOutlineCheckCircle } from \"react-icons/ai\"\n\nexport const Wrapper = styled.div`\n  position: fixed;\n  flex-direction:column;\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  height:auto;\n  max-height: 230px;\n  padding: 2rem;\n  left: 50%;\n  width:100%;\n  bottom:0;\n  transform: translateX(-50%) scale(${({ isActive }) => (isActive ? \"1\" : \"0\")});\n  transform-origin: bottom;\n  background-color: ${({ theme }) => theme.colors.white};\n  color: ${({ theme }) => theme.colors.fontColor};\n  border-radius: ${({ theme }) => theme.otherStyles.smallRadius};\n  transition: transform 0.1s ease;\n  box-shadow:${({theme})=> theme.otherStyles.shadow};\n  z-index:10000;\n`\nexport const Title = styled.p`\n  border-bottom: 1px solid green;\n  color: ${({ theme }) => theme.colors.accent};\n  text-align: center;\n  font-size: 2rem;\n  padding-bottom: 1rem;\n`\nexport const TextContainer = styled.div`\n  padding-top: 1.6rem;\n  max-width:300px;\n  text-align:center;\n`\nexport const Text = styled.p`\n  font-size: 1.5rem;\n  font-family: \"Poppins\", sans-serif;\n`\n\nexport const PopupBtn = styled(Button)`\n  border: none;\n  width:150px;\n  padding:1rem .8rem;\n  margin-top:1.6rem;\n  background-color: ${({ theme }) => theme.colors.base};\n\n  &:hover {\n    background-color: ${({ theme }) => theme.colors.accent};\n  }\n`\n\nconst NotificationPopup = ({ children, isActive = false, onClick }) => {\n  return (\n    <Wrapper isActive={isActive}>\n      <Title>\n        <AiOutlineCheckCircle /> Sukces!\n      </Title>\n      <TextContainer>\n        <Text>{children}</Text>\n      </TextContainer>\n      <PopupBtn onClick={onClick} isLong>\n        Przejdź\n      </PopupBtn>\n    </Wrapper>\n  )\n}\n\nexport default NotificationPopup\n","import React, { useState } from \"react\"\nimport axios from \"axios\"\nimport styled from \"styled-components\"\nimport FormField from \"../components/molecules/FormField/FormField\"\n\nimport Button from \"../components/atoms/Button/Button\"\nimport SelectField from \"../components/molecules/SelectField/SelectField\"\nimport LoadingPopup from \"../components/molecules/LoadingPopup/LoadingPopup\"\nimport NotificationPopup from \"../components/organisms/NotificationPopup/NotificationPopup\"\nimport ErrorText from \"../components/atoms/ErrorText/ErrorText\"\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  width: 100%;\n  height: 100vh;\n  margin: 0 auto;\n  margin-top: 10rem;\n  padding: 2rem 2rem;\n`\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n  max-width: 600px;\n`\n\nconst AddRecipeHeader = styled.h2`\n  align-self: flex-start;\n  margin-left: 2rem;\n  font-weight: 700;\n  color: ${({ theme }) => theme.colors.fontColor};\n  font-size: ${({ theme }) => theme.fontSize.medium};\n`\n\nconst FormContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  width: 100%;\n`\n\nconst Form = styled.form`\n  width: 100%;\n  height: 100%;\n  padding: 2rem;\n\n  @media only screen and (max-width: 320px) {\n    min-height: 400px;\n    overflow-y: scroll;\n  }\n  @media only screen and (min-width: 768px) {\n    height: auto;\n    overflow: auto;\n  }\n`\n\nconst initialState = {\n  title: \"\",\n  time: \"\",\n  diets: \"\",\n  difficulties: \"\",\n  types: \"\",\n  preparation: \"\",\n  ingredients: \"\",\n}\n\nconst AddRecipe = () => {\n  const [isValid, setIsValid] = useState(true)\n  const [recipeInfo, setRecipeInfo] = useState(initialState)\n  const [file, setFile] = useState()\n  const [isLoading, setIsLoading] = useState(false)\n  const {\n    title,\n    time,\n    diets,\n    difficulties,\n    types,\n    preparation,\n    ingredients,\n    calories,\n  } = recipeInfo\n  const [isPopupActive, setIsPopupActive] = useState(false)\n\n  const togglePopup = () => {\n    setIsPopupActive(!isPopupActive)\n  }\n  const windowGlobal = typeof window !== \"undefined\" && window\n  const token = windowGlobal\n    ? JSON.parse(windowGlobal.localStorage.getItem(\"token\"))\n    : null\n\n  const uploadHandler = async e => {\n    e.preventDefault()\n    if (!validateInputs()) return\n    setIsLoading(true)\n    await axios\n      .post(\n        `${process.env.STRAPI_URL}/recipes`,\n        {\n          title: title,\n          time: time,\n          calories: calories,\n          preparation: preparation,\n          ingredients: ingredients,\n          diets: [\n            {\n              _id: diets,\n            },\n          ],\n          difficulties: [\n            {\n              _id: difficulties,\n            },\n          ],\n          types: [\n            {\n              _id: types,\n            },\n          ],\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      )\n      .then(res => {\n        uploadImage(res.data.id)\n        setIsLoading(false)\n        togglePopup()\n      })\n      .catch(err => console.log(err))\n  }\n\n  //Upload zdjecia\n  async function uploadImage(id) {\n    const formData = new FormData()\n\n    formData.append(\"files\", file)\n    formData.append(\"refId\", id)\n    formData.append(\"ref\", \"recipes\")\n    formData.append(\"field\", \"img\")\n\n    await axios\n      .post(`${process.env.STRAPI_URL}/upload`, formData, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then(res => {\n        setIsLoading(false)\n      })\n      .catch(err => console.log(err))\n  }\n\n  const updateInput = e => {\n    setRecipeInfo({ ...recipeInfo, [e.target.name]: e.target.value })\n  }\n\n  const updateSelect = e => {\n    const select = e.target\n    const selectValue = select.options[select.selectedIndex].value\n    setRecipeInfo({ ...recipeInfo, [select.id]: selectValue })\n  }\n  let formInputsArr\n  if (typeof window !== \"undefined\") {\n    formInputsArr = [\n      ...document.querySelectorAll(\"textarea\"),\n      ...document.querySelectorAll(\"input\"),\n    ]\n  }\n  const validateInputs = () => {\n    formInputsArr.forEach(input => {\n      if (input.value.trim() === \"\") {\n        input.classList.add(\"invalid\")\n        setIsValid(false)\n        return false\n      } else {\n        input.classList.remove(\"invalid\")\n        setIsValid(true)\n      }\n      return\n    })\n  }\n\n  return (\n    <Wrapper>\n      <Container>\n        <AddRecipeHeader>Dodaj Przepis</AddRecipeHeader>\n\n        <Form\n          onSubmit={e => {\n            uploadHandler(e)\n          }}\n        >\n          <FormContainer>\n            <FormField\n              onChange={updateInput}\n              width=\"70\"\n              nameId=\"title\"\n              content=\"tytuł\"\n            />\n            <FormField\n              content=\"czas\"\n              onChange={updateInput}\n              width=\"25\"\n              nameId=\"time\"\n              type=\"number\"\n            />\n            <FormField\n              content=\"kalorie\"\n              onChange={updateInput}\n              width=\"25\"\n              nameId=\"calories\"\n              type=\"number\"\n            />\n          </FormContainer>\n          <FormContainer>\n            <SelectField\n              nameId=\"diets\"\n              content=\"dieta\"\n              onChange={updateSelect}\n              valuesIds={[\n                \"621d167b5959ad7a45d14bea\",\n                \"621bb7b5896c806c8af640a7\",\n                \"621bb7ad896c806c8af640a6\",\n                \"621bb7bd896c806c8af640a8\",\n              ]}\n              values={[\"zbilansowana\", \"wege\", \"wegańska\", \"bez-laktozy\"]}\n            />\n            <SelectField\n              nameId=\"difficulties\"\n              content=\"trudność\"\n              onChange={updateSelect}\n              valuesIds={[\n                \"621d079c896c806c8af640b5\",\n                \"621d07a8896c806c8af640b6\",\n                \"621d07b8896c806c8af640b7\",\n              ]}\n              values={[\"łatwe\", \"średnie\", \"trudne\"]}\n            />\n            <SelectField\n              nameId=\"types\"\n              content=\"posiłek\"\n              onChange={updateSelect}\n              valuesIds={[\n                \"621d048d896c806c8af640aa\",\n                \"621bbd62896c806c8af640a9\",\n                \"621d0497896c806c8af640ab\",\n                \"621d04a4896c806c8af640ac\",\n                \"62364060b17a20ff6a917404\",\n              ]}\n              values={[\"śniadanie\", \"obiad\", \"kolacja\", \"deser\", \"napój\"]}\n            />\n          </FormContainer>\n\n          <FormField\n            content=\"przygotowanie\"\n            onChange={updateInput}\n            textarea={true}\n            nameId=\"preparation\"\n            type=\"textarea\"\n          />\n          <FormField\n            content=\"składniki\"\n            onChange={updateInput}\n            textarea={true}\n            nameId=\"ingredients\"\n            type=\"textarea\"\n          />\n\n          <FormField\n            content=\"zdjęcie\"\n            onChange={e => {\n              setFile(e.target.files[0])\n            }}\n            nameId=\"image\"\n            type=\"file\"\n          />\n          {!isValid ? <ErrorText>Pola nie mogą być puste!</ErrorText> : null}\n          <Button isLong={true} type=\"submit\">\n            Dodaj przepis\n          </Button>\n        </Form>\n        {isLoading ? <LoadingPopup /> : null}\n        <NotificationPopup\n          onClick={() => togglePopup()}\n          isActive={isPopupActive}\n        >\n          Przepis został pomyślnie dodany.\n        </NotificationPopup>\n      </Container>\n    </Wrapper>\n  )\n}\n\nexport default AddRecipe\n"],"names":["spinner","keyframes","Circle","styled","theme","colors","accent","white","Wrapper","isActive","fontColor","otherStyles","smallRadius","shadow","Title","TextContainer","Text","PopupBtn","Button","base","children","onClick","isLong","Container","AddRecipeHeader","fontSize","medium","FormContainer","Form","initialState","title","time","diets","difficulties","types","preparation","ingredients","useState","isValid","setIsValid","recipeInfo","setRecipeInfo","file","setFile","isLoading","setIsLoading","calories","isPopupActive","setIsPopupActive","togglePopup","windowGlobal","window","token","JSON","parse","localStorage","getItem","uploadHandler","e","preventDefault","validateInputs","axios","process","_id","headers","Authorization","then","res","uploadImage","data","id","catch","err","console","log","formData","FormData","append","formInputsArr","updateInput","target","name","value","updateSelect","select","selectValue","options","selectedIndex","document","querySelectorAll","forEach","input","trim","classList","add","remove","onSubmit","onChange","width","nameId","content","type","valuesIds","values","textarea","files"],"sourceRoot":""}