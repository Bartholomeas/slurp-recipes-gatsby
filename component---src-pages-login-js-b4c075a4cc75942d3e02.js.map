{"version":3,"file":"component---src-pages-login-js-b4c075a4cc75942d3e02.js","mappings":"kJAAO,IAAMA,EAAiB,SAACC,EAAWC,GACxC,QAD2D,IAAnBA,IAAAA,GAAS,GAC3B,oBAAXC,OAAwB,CACjC,IAAe,IAAXD,EAIG,CACL,IAAME,EAAaC,SAASC,cAAT,aAAoCL,EAApC,MAGnB,OAFAG,EAAWG,UAAUC,IAAI,WACzBJ,EAAWK,aAAa,YAAa,WAC9BL,CACR,CARCC,SACGC,cADH,aAC8BL,EAD9B,MAEGM,UAAUL,OAAO,UAOvB,CACF,C,iNCuDD,EApDmB,WACjB,OAAkCQ,EAAAA,EAAAA,WAAS,GAApCC,EAAP,KAAkBC,EAAlB,KACA,GAA8BF,EAAAA,EAAAA,WAAS,GAAhCG,EAAP,KAAgBC,EAAhB,KACMC,EAAaC,EAAAA,UAAgB,IAC7BC,EAAgBD,EAAAA,UAAgB,IAGhCE,EAAa,mCAAG,WAAMC,GAAN,8EACpBA,EAAEC,iBACFR,GAAa,GAFO,kBAICS,IAAAA,KAAcC,iDAAqC,CACpEC,WAAYR,EAAWS,QAAQC,MAC/BC,SAAUT,EAAcO,QAAQC,QANhB,OAIZE,EAJY,OAQlBC,aAAaC,QAAQ,QAASC,KAAKC,UAAUJ,EAAKA,KAAKK,MACvDJ,aAAaC,QAAQ,OAAQC,KAAKC,UAAUJ,EAAKA,KAAKM,KAAKC,WAC3DtB,GAAa,IACbuB,EAAAA,EAAAA,IAAS,KAXS,kDAalBvB,GAAa,IACbZ,EAAAA,EAAAA,GAAe,UACfA,EAAAA,EAAAA,GAAe,YACfc,GAAW,GAhBO,0DAAH,sDAoBnB,OACE,gCACE,gBAAC,KAAD,CAAkB,cAAa,cAC7B,gBAAC,KAAD,qBACA,gBAAC,KAAD,KACE,gBAACsB,EAAA,EAAD,CAAWC,OAAO,QAAQC,QAAQ,QAAQC,IAAKxB,IAC/C,gBAACqB,EAAA,EAAD,CACEC,OAAO,WACPG,KAAK,WACLF,QAAQ,QACRC,IAAKtB,KAELJ,GAAW,gBAAC4B,EAAA,EAAD,oCACb,gBAACC,EAAA,EAAD,CAAQC,QAAM,EAACH,KAAK,SAASI,QAAS,SAAAzB,GAAC,OAAID,EAAcC,EAAlB,GAAvC,gBAIF,gBAAC,KAAD,CAAU0B,GAAG,aAAb,mBACkB,gBAAC,KAAD,2BAGnBlC,GAAa,gBAACmC,EAAA,GAAD,MAGnB,EC/DKC,EAAeC,EAAAA,QAAAA,IAAAA,WAAH,8DAAGA,CAAH,2LAOI,qBAAGC,MAAkBC,OAAOC,IAA5B,IActB,EARc,WACZ,OACE,gBAACJ,EAAD,KACE,gBAAC,EAAD,MAGL,C,wMCpBYK,EAAmBJ,EAAAA,QAAAA,IAAAA,WAAH,4EAAGA,CAAH,ySASV,qBAAGC,MAAkBI,YAAYC,WAAjC,IACe,qBAAGL,MAAkBI,YAAYE,MAAjC,IACZ,qBAAGN,MAAkBC,OAAOM,KAA5B,IAQTC,EAAaT,EAAAA,QAAAA,EAAAA,WAAH,sEAAGA,CAAH,iDAGZ,qBAAGC,MAAkBC,OAAOQ,SAA5B,IAEEC,EAAWX,EAAAA,QAAAA,KAAAA,WAAH,oEAAGA,CAAH,oGAQRY,GAAWZ,EAAAA,EAAAA,SAAOa,EAAAA,IAAV,+EAAGb,CAAH,oEAIV,qBAAGC,MAAkBC,OAAOY,QAA5B,IAEEC,EAAcf,EAAAA,QAAAA,KAAAA,WAAH,uEAAGA,CAAH,gBACb,qBAAGC,MAAkBC,OAAOc,MAA5B,IAEEC,EAAmBjB,EAAAA,QAAAA,EAAAA,WAAH,4EAAGA,CAAH,0FAGlB,qBAAGC,MAAkBC,OAAOY,QAA5B,G","sources":["webpack://slurp-recipes/./src/components/utils/errorHelper.js","webpack://slurp-recipes/./src/components/organisms/LoginPanel/LoginPanel.js","webpack://slurp-recipes/./src/pages/login.js","webpack://slurp-recipes/./src/styles/joinPanel.styles.js"],"sourcesContent":["export const setErrorStatus = (inputName, remove = false) => {\n  if (typeof window !== \"undefined\") {\n    if (remove === true) {\n      document\n        .querySelector(`input[id='${inputName}']`)\n        .classList.remove(\"invalid\")\n    } else {\n      const errorInput = document.querySelector(`input[id='${inputName}']`)\n      errorInput.classList.add(\"invalid\")\n      errorInput.setAttribute(\"className\", \"invalid\")\n      return errorInput\n    }\n  }\n}\n","import React, { useState } from \"react\"\nimport axios from \"axios\"\nimport { navigate } from \"gatsby\"\nimport Button from \"../../atoms/Button/Button\"\nimport {\n  JoinPanelWrapper,\n  JoinHeader,\n  JoinForm,\n  JoinLink,\n  ColoredText,\n} from \"../../../styles/joinPanel.styles\"\nimport FormField from \"../../molecules/FormField/FormField\"\nimport ErrorText from \"../../atoms/ErrorText/ErrorText\"\nimport LoadingPopup from \"../../molecules/LoadingPopup/LoadingPopup\"\nimport { setErrorStatus } from \"../../utils/errorHelper\"\n\nconst LoginPanel = () => {\n  const [isLoading, setIsLoading] = useState(false)\n  const [isValid, setIsValid] = useState(true)\n  const loginInput = React.createRef(\"\")\n  const passwordInput = React.createRef(\"\")\n  // let errorInput\n\n  const authorizeUser = async e => {\n    e.preventDefault()\n    setIsLoading(true)\n    try {\n      const data = await axios.post(`${process.env.STRAPI_URL}/auth/local`, {\n        identifier: loginInput.current.value,\n        password: passwordInput.current.value,\n      })\n      localStorage.setItem(\"token\", JSON.stringify(data.data.jwt))\n      localStorage.setItem(\"user\", JSON.stringify(data.data.user.username))\n      setIsLoading(false)\n      navigate(\"/\")\n    } catch {\n      setIsLoading(false)\n      setErrorStatus(\"login\")\n      setErrorStatus(\"password\")\n      setIsValid(false)\n    }\n  }\n\n  return (\n    <>\n      <JoinPanelWrapper data-testid={\"login-body\"}>\n        <JoinHeader>Zaloguj się.</JoinHeader>\n        <JoinForm>\n          <FormField nameId=\"login\" content=\"Login\" ref={loginInput} />\n          <FormField\n            nameId=\"password\"\n            type=\"password\"\n            content=\"Hasło\"\n            ref={passwordInput}\n          />\n          {!isValid && <ErrorText>Niepoprawny login lub hasło</ErrorText>}\n          <Button isLong type=\"submit\" onClick={e => authorizeUser(e)}>\n            Zaloguj się\n          </Button>\n        </JoinForm>\n        <JoinLink to=\"/register\">\n          Nie masz konta? <ColoredText>Zarejestruj się.</ColoredText>\n        </JoinLink>\n      </JoinPanelWrapper>\n      {isLoading && <LoadingPopup />}\n    </>\n  )\n}\nexport default LoginPanel\n","import React from \"react\"\nimport styled from \"styled-components\"\nimport LoginPanel from \"../components/organisms/LoginPanel/LoginPanel\"\n\nconst LoginWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 90vh;\n  margin-top: 7rem;\n  background-color: ${({ theme }) => theme.colors.base};\n\n  @media only screen and (min-width: 768px) {\n    padding: 3rem;\n  }\n`\nconst Login = () => {\n  return (\n    <LoginWrapper>\n      <LoginPanel />\n    </LoginWrapper>\n  )\n}\n\nexport default Login\n","import { Link } from \"gatsby\"\nimport styled from \"styled-components\"\n\nexport const JoinPanelWrapper = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  justify-content: center;\n  height: auto;\n  width: 100%;\n  padding: 3rem;\n  border-radius: ${({ theme }) => theme.otherStyles.smallRadius};\n  box-shadow: 3px 2px 10px -3px ${({ theme }) => theme.otherStyles.shadow};\n  background-color: ${({ theme }) => theme.colors.white};\n  overflow: hidden;\n\n  @media only screen and (min-width: 768px) {\n    height: auto;\n    max-width: 600px;\n  }\n`\nexport const JoinHeader = styled.p`\n  font-weight: 300;\n  font-size: 3.2rem;\n  color: ${({ theme }) => theme.colors.fontColor};\n`\nexport const JoinForm = styled.form`\n  display: flex;\n  flex-direction: column;\n  padding-top: 2rem;\n\n  @media only screen and (min-width: 768px) {\n  }\n`\nexport const JoinLink = styled(Link)`\n  text-decoration: none;\n  font-size: 1.2rem;\n  margin: 1rem 0;\n  color: ${({ theme }) => theme.colors.darkGrey};\n`\nexport const ColoredText = styled.span`\n  color: ${({ theme }) => theme.colors.accent};\n`\nexport const PasswordInfoText = styled.p`\n  display: flex;\n  align-items: flex-start;\n  color: ${({ theme }) => theme.colors.darkGrey};\n  font-size: 1.6rem;\n  margin-bottom: 1.6rem;\n`\n"],"names":["setErrorStatus","inputName","remove","window","errorInput","document","querySelector","classList","add","setAttribute","useState","isLoading","setIsLoading","isValid","setIsValid","loginInput","React","passwordInput","authorizeUser","e","preventDefault","axios","process","identifier","current","value","password","data","localStorage","setItem","JSON","stringify","jwt","user","username","navigate","FormField","nameId","content","ref","type","ErrorText","Button","isLong","onClick","to","LoadingPopup","LoginWrapper","styled","theme","colors","base","JoinPanelWrapper","otherStyles","smallRadius","shadow","white","JoinHeader","fontColor","JoinForm","JoinLink","Link","darkGrey","ColoredText","accent","PasswordInfoText"],"sourceRoot":""}