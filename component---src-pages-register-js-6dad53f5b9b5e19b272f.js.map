{"version":3,"file":"component---src-pages-register-js-6dad53f5b9b5e19b272f.js","mappings":"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","sources":["webpack://slurp-recipes/./src/components/organisms/NotificationPopup/NotificationPopup.js","webpack://slurp-recipes/./src/components/organisms/RegisterPanel/RegisterPanel.js","webpack://slurp-recipes/./src/pages/register.js","webpack://slurp-recipes/./src/styles/joinPanel.styles.js"],"sourcesContent":["import React from \"react\"\nimport styled from \"styled-components\"\nconst NotificationPopup = () => {\n  return <div>NotificationPopup</div>\n}\n\nexport default NotificationPopup\n","import React, { useState } from \"react\"\nimport axios from \"axios\"\nimport FormField from \"../../molecules/FormField/FormField\"\nimport Button from \"../../atoms/Button/Button\"\nimport NotificationPopup from \"../../organisms/NotificationPopup/NotificationPopup\"\nimport {\n  JoinPanelWrapper,\n  JoinHeader,\n  JoinForm,\n  JoinLink,\n  ColoredText,\n  PasswordInfoText,\n} from \"../../../styles/joinPanel.styles\"\nimport { AiOutlineQuestionCircle as QuestionIcon } from \"react-icons/ai\"\nimport ErrorText from \"../../atoms/ErrorText/ErrorText\"\n\nconst RegisterPanel = () => {\n  const [registerInfo, setRegisterInfo] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    confirm_password: \"\",\n  })\n  const [errorMessage, setErrorMessage] = useState(\"\")\n  const [isValid, setIsValid] = useState(true)\n\n  const mailRegex = new RegExp(\n    \"([!#-'*+/-9=?A-Z^-~-]+(.[!#-'*+/-9=?A-Z^-~-]+)*|\\\"([]!#-[^-~ \\t]|(\\\\[\\t -~]))+\\\")@([!#-'*+/-9=?A-Z^-~-]+(.[!#-'*+/-9=?A-Z^-~-]+)*|[[\\t -Z^-~]*])\"\n  )\n  const passwordRegex = new RegExp(\"(?=.*[A-Z])(?=.*[a-z])(?=.*?[0-9])\")\n\n  // Aktualizacja stanu inputów\n  const updateInput = e => {\n    setRegisterInfo({ ...registerInfo, [e.target.name]: e.target.value })\n  }\n\n  // Walidacja formularza\n  const validateForm = () => {\n    // e.preventDefault()\n    errorInputsArray = []\n\n    // Walidacja nazwy uzytkownika\n    if (registerInfo[\"username\"] != \"\") {\n      setErrorStatus(\"username\", true)\n      setIsValid(true)\n    } else {\n      setErrorStatus(\"username\")\n      setErrorMessage(\"Nazwa użytkownika nie może być pusta\")\n      setIsValid(false)\n    }\n\n    // Walidacja email\n    if (mailRegex.test(registerInfo[\"email\"])) {\n      setErrorStatus(\"email\", true)\n    } else {\n      setErrorStatus(\"email\")\n      setErrorMessage(\"Adres e-mail niepoprawny\")\n      setIsValid(false)\n    }\n    // Walidacja hasła\n    if (passwordRegex.test(registerInfo[\"confirm_password\"])) {\n      if (registerInfo[\"password\"] === registerInfo[\"confirm_password\"]) {\n        setErrorStatus(\"password\", true)\n        setErrorStatus(\"confirm_password\", true)\n      } else {\n        setErrorStatus(\"password\")\n        setErrorStatus(\"confirm_password\")\n        setErrorMessage(\"Hasło musi zawierać conajmniej 1 cyfrę i duza literę\")\n        setIsValid(false)\n        return false\n      }\n    } else if (registerInfo[\"password\"].length < 8) {\n      console.log(\"Haslo za krotkie\")\n      setErrorStatus(\"password\")\n      setErrorStatus(\"confirm_password\")\n      setErrorMessage(\"Hasło za krótkie, musi mieć conajmniej 8 znaków\")\n      setIsValid(false)\n      return false\n    } else {\n      setErrorStatus(\"password\")\n      setErrorStatus(\"confirm_password\")\n      setErrorMessage(\"Hasła się różnią\")\n      setIsValid(false)\n      return false\n    }\n\n    return\n  }\n\n  // Wysłanie zapytania z rejestracją\n  const registerUser = async e => {\n    e.preventDefault()\n\n    validateForm()\n    if (isValid) {\n      await axios\n        .post(`${process.env.STRAPI_URL}/auth/local/register`, registerInfo)\n        .then(res => console.log(res))\n        .catch(err => console.log(err))\n    } else {\n      console.log(\"Jest false nie wysyla requesta\")\n    }\n  }\n\n  let errorInput = \"\"\n  let errorInputsArray = []\n\n  const setErrorStatus = (inputName, remove = false) => {\n    if (remove === true) {\n      document\n        .querySelector(`input[id='${inputName}']`)\n        .classList.remove(\"invalid\")\n\n      console.log(\"ebe\")\n    } else {\n      errorInput = document.querySelector(`input[id='${inputName}']`)\n      errorInput.classList.add(\"invalid\")\n      errorInput.setAttribute(\"className\", \"invalid\")\n      errorInputsArray.push(errorInput)\n    }\n  }\n\n  return (\n    <JoinPanelWrapper>\n      <JoinHeader>Zarejestruj się.</JoinHeader>\n      <JoinForm>\n        <FormField\n          onChange={e => updateInput(e)}\n          nameId=\"username\"\n          content=\"Nazwa użytkownika\"\n        />\n        <FormField\n          onChange={e => updateInput(e)}\n          nameId=\"email\"\n          type=\"email\"\n          content=\"E-mail\"\n        />\n        <FormField\n          onChange={e => updateInput(e)}\n          nameId=\"password\"\n          type=\"password\"\n          content=\"Hasło\"\n        />\n        <FormField\n          onChange={e => updateInput(e)}\n          nameId=\"confirm_password\"\n          type=\"password\"\n          content=\"Powtórz hasło\"\n        />\n        <PasswordInfoText>\n          <QuestionIcon style={{ marginRight: \"1rem\" }} />\n          Hasło musi zawierać conajmniej 8 znaków w tym przynajmniej jedną cyfrę\n          i wielką literę\n        </PasswordInfoText>\n        {!isValid ? <ErrorText>{errorMessage}</ErrorText> : null}\n\n        <Button onClick={e => registerUser(e)} type=\"submit\" isLong>\n          Zarejestruj\n        </Button>\n      </JoinForm>\n      <JoinLink to=\"/login\">\n        Masz konto? <ColoredText>Zaloguj się.</ColoredText>\n      </JoinLink>\n      <NotificationPopup></NotificationPopup>\n    </JoinPanelWrapper>\n  )\n}\n\nexport default RegisterPanel\n","import React from \"react\"\nimport styled from \"styled-components\"\nimport RegisterPanel from \"../components/organisms/RegisterPanel/RegisterPanel\"\n\nconst RegisterWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  margin-top: 7rem;\n  background-color: ${({ theme }) => theme.colors.greenish};\n\n  @media only screen and (min-width: 768px) {\n    padding: 3rem;\n  }\n`\n\nconst Register = () => {\n  return (\n    <RegisterWrapper>\n      <RegisterPanel />\n    </RegisterWrapper>\n  )\n}\n\nexport default Register\n","import { Link } from \"gatsby\"\nimport styled from \"styled-components\"\n\nexport const JoinPanelWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  justify-content: center;\n  height: auto;\n  width: 100%;\n  padding: 3rem;\n  border-radius: 6px;\n  box-shadow: 3px 2px 10px -3px ${({ theme }) => theme.colors.shadow};\n  background-color: ${({ theme }) => theme.colors.white};\n\n  @media only screen and (min-width: 768px) {\n    height: auto;\n    max-width: 600px;\n  }\n`\nexport const JoinHeader = styled.p`\n  font-weight: 300;\n  font-size: 3.2rem;\n  color: ${({ theme }) => theme.colors.fontColor};\n`\nexport const JoinForm = styled.form`\n  display: flex;\n  flex-direction: column;\n  padding-top: 2rem;\n\n  @media only screen and (min-width: 768px) {\n  }\n`\nexport const JoinLink = styled(Link)`\n  text-decoration: none;\n  /* margin-top: 0.8rem; */\n  color: ${({ theme }) => theme.colors.darkGrey};\n`\nexport const ColoredText = styled.span`\n  color: ${({ theme }) => theme.colors.secondaryColor};\n`\nexport const PasswordInfoText = styled.p`\n  display: flex;\n  align-items: flex-start;\n  color: ${({ theme }) => theme.colors.darkGrey};\n  font-size: 1.6rem;\n  margin-bottom: 1.6rem;\n`\n"],"names":["useState","username","email","password","confirm_password","registerInfo","setRegisterInfo","errorMessage","setErrorMessage","isValid","setIsValid","mailRegex","RegExp","passwordRegex","updateInput","e","target","name","value","registerUser","preventDefault","errorInputsArray","setErrorStatus","test","length","console","log","axios","process","then","res","catch","err","errorInput","inputName","remove","document","querySelector","classList","add","setAttribute","push","FormField","onChange","nameId","content","type","style","marginRight","ErrorText","Button","onClick","isLong","to","RegisterWrapper","styled","theme","colors","greenish","JoinPanelWrapper","shadow","white","JoinHeader","fontColor","JoinForm","JoinLink","Link","darkGrey","ColoredText","secondaryColor","PasswordInfoText"],"sourceRoot":""}