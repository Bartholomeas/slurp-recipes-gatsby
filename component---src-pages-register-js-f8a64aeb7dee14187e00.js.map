{"version":3,"file":"component---src-pages-register-js-f8a64aeb7dee14187e00.js","mappings":"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","sources":["webpack://slurp-recipes/./src/components/organisms/RegisterPanel/RegisterPanel.js","webpack://slurp-recipes/./src/pages/register.js","webpack://slurp-recipes/./src/styles/joinPanel.styles.js"],"sourcesContent":["import React, { useState } from \"react\"\nimport axios from \"axios\"\nimport { navigate } from \"gatsby\"\nimport FormField from \"../../molecules/FormField/FormField\"\nimport Button from \"../../atoms/Button/Button\"\nimport NotificationPopup from \"../../organisms/NotificationPopup/NotificationPopup\"\nimport {\n  JoinPanelWrapper,\n  JoinHeader,\n  JoinForm,\n  JoinLink,\n  ColoredText,\n  PasswordInfoText,\n} from \"../../../styles/joinPanel.styles\"\nimport { AiOutlineQuestionCircle as QuestionIcon } from \"react-icons/ai\"\nimport ErrorText from \"../../atoms/ErrorText/ErrorText\"\n\nconst RegisterPanel = () => {\n  const [registerInfo, setRegisterInfo] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    confirm_password: \"\",\n  })\n  const [errorMessage, setErrorMessage] = useState(\"\")\n  const [isValid, setIsValid] = useState(true)\n  const [isPopupActive, setIsPopupActive] = useState(false)\n\n  const mailRegex = new RegExp(\n    \"([!#-'*+/-9=?A-Z^-~-]+(.[!#-'*+/-9=?A-Z^-~-]+)*|\\\"([]!#-[^-~ \\t]|(\\\\[\\t -~]))+\\\")@([!#-'*+/-9=?A-Z^-~-]+(.[!#-'*+/-9=?A-Z^-~-]+)*|[[\\t -Z^-~]*])\"\n  )\n  const passwordRegex = new RegExp(\"(?=.*[A-Z])(?=.*[a-z])(?=.*?[0-9])\")\n\n  const togglePopup = () => {\n    setIsPopupActive(!isPopupActive)\n\n    setTimeout(() => {\n      navigate(`/login`)\n    }, 3000)\n  }\n\n  // Aktualizacja stanu inputów\n  const updateInput = e => {\n    setRegisterInfo({ ...registerInfo, [e.target.name]: e.target.value })\n  }\n\n  // Walidacja formularza\n  const validateForm = () => {\n    // e.preventDefault()\n    // errorInputsArray = []\n\n    // Walidacja nazwy uzytkownika\n    if (registerInfo[\"username\"] !== \"\") {\n      setErrorStatus(\"username\", true)\n      setIsValid(true)\n    } else {\n      setErrorStatus(\"username\")\n      setErrorMessage(\"Nazwa użytkownika nie może być pusta\")\n      setIsValid(false)\n    }\n\n    // Walidacja email\n    if (mailRegex.test(registerInfo[\"email\"])) {\n      setErrorStatus(\"email\", true)\n    } else {\n      setErrorStatus(\"email\")\n      setErrorMessage(\"Adres e-mail niepoprawny\")\n      setIsValid(false)\n    }\n    // Walidacja hasła\n    if (passwordRegex.test(registerInfo[\"confirm_password\"])) {\n      if (registerInfo[\"password\"] === registerInfo[\"confirm_password\"]) {\n        setErrorStatus(\"password\", true)\n        setErrorStatus(\"confirm_password\", true)\n      } else {\n        setErrorStatus(\"password\")\n        setErrorStatus(\"confirm_password\")\n        setErrorMessage(\"Hasło musi zawierać conajmniej 1 cyfrę i duza literę\")\n        setIsValid(false)\n        return false\n      }\n    } else if (registerInfo[\"password\"].length < 8) {\n      console.log(\"Haslo za krotkie\")\n      setErrorStatus(\"password\")\n      setErrorStatus(\"confirm_password\")\n      setErrorMessage(\"Hasło za krótkie, musi mieć conajmniej 8 znaków\")\n      setIsValid(false)\n      return false\n    } else {\n      setErrorStatus(\"password\")\n      setErrorStatus(\"confirm_password\")\n      setErrorMessage(\"Hasła się różnią\")\n      setIsValid(false)\n      return false\n    }\n\n  }\n\n  // Wysłanie zapytania z rejestracją\n  const registerUser = async e => {\n    e.preventDefault()\n\n    validateForm()\n    if (isValid) {\n      await axios\n        .post(`${process.env.STRAPI_URL}/auth/local/register`, registerInfo)\n        .then(() => {\n          togglePopup()\n        })\n        .catch(err => console.log(err))\n    }\n  }\n\n  let errorInput = \"\"\n  // let errorInputsArray = []\n\n  const setErrorStatus = (inputName, remove = false) => {\n    if (typeof window !== \"undefined\") {\n      if (remove === true) {\n        document\n          .querySelector(`input[id='${inputName}']`)\n          .classList.remove(\"invalid\")\n      } else {\n        errorInput = document.querySelector(`input[id='${inputName}']`)\n        errorInput.classList.add(\"invalid\")\n        errorInput.setAttribute(\"className\", \"invalid\")\n        // errorInputsArray.push(errorInput)\n      }\n    }\n  }\n\n  return (\n    <JoinPanelWrapper>\n      <JoinHeader>Zarejestruj się.</JoinHeader>\n      <JoinForm>\n        <FormField\n          onChange={e => updateInput(e)}\n          nameId=\"username\"\n          content=\"Nazwa użytkownika\"\n        />\n        <FormField\n          onChange={e => updateInput(e)}\n          nameId=\"email\"\n          type=\"email\"\n          content=\"E-mail\"\n        />\n        <FormField\n          onChange={e => updateInput(e)}\n          nameId=\"password\"\n          type=\"password\"\n          content=\"Hasło\"\n        />\n        <FormField\n          onChange={e => updateInput(e)}\n          nameId=\"confirm_password\"\n          type=\"password\"\n          content=\"Powtórz hasło\"\n        />\n        <PasswordInfoText>\n          <QuestionIcon style={{ marginRight: \"1rem\" }} />\n          Hasło musi zawierać conajmniej 8 znaków w tym przynajmniej jedną cyfrę\n          i wielką literę\n        </PasswordInfoText>\n        {!isValid ? <ErrorText>{errorMessage}</ErrorText> : null}\n\n        <Button onClick={e => registerUser(e)} type=\"submit\" isLong>\n          Zarejestruj\n        </Button>\n      </JoinForm>\n      <JoinLink to=\"/login\">\n        Masz konto? <ColoredText>Zaloguj się.</ColoredText>\n      </JoinLink>\n      <NotificationPopup onClick={togglePopup} isActive={isPopupActive}>\n        Gratulacje, rejestracja przebiegła pomyślnie, zostaniesz przeniesiony na\n        stronę logowania\n      </NotificationPopup>\n    </JoinPanelWrapper>\n  )\n}\n\nexport default RegisterPanel\n","import React from \"react\"\nimport styled from \"styled-components\"\nimport RegisterPanel from \"../components/organisms/RegisterPanel/RegisterPanel\"\n\nconst RegisterWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  margin-top: 7rem;\n  background-color: ${({ theme }) => theme.colors.base};\n\n  @media only screen and (min-width: 768px) {\n    padding: 3rem;\n  }\n`\n\nconst Register = () => {\n  return (\n    <RegisterWrapper>\n      <RegisterPanel />\n    </RegisterWrapper>\n  )\n}\n\nexport default Register\n","import { Link } from \"gatsby\"\nimport styled from \"styled-components\"\n\nexport const JoinPanelWrapper = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  justify-content: center;\n  height: auto;\n  width: 100%;\n  padding: 3rem;\n  border-radius: ${({ theme }) => theme.otherStyles.smallRadius};\n  box-shadow: 3px 2px 10px -3px ${({ theme }) => theme.otherStyles.shadow};\n  background-color: ${({ theme }) => theme.colors.white};\n  overflow: hidden;\n\n  @media only screen and (min-width: 768px) {\n    height: auto;\n    max-width: 600px;\n  }\n`\nexport const JoinHeader = styled.p`\n  font-weight: 300;\n  font-size: 3.2rem;\n  color: ${({ theme }) => theme.colors.fontColor};\n`\nexport const JoinForm = styled.form`\n  display: flex;\n  flex-direction: column;\n  padding-top: 2rem;\n\n  @media only screen and (min-width: 768px) {\n  }\n`\nexport const JoinLink = styled(Link)`\n  text-decoration: none;\n  color: ${({ theme }) => theme.colors.darkGrey};\n`\nexport const ColoredText = styled.span`\n  color: ${({ theme }) => theme.colors.accent};\n`\nexport const PasswordInfoText = styled.p`\n  display: flex;\n  align-items: flex-start;\n  color: ${({ theme }) => theme.colors.darkGrey};\n  font-size: 1.6rem;\n  margin-bottom: 1.6rem;\n`\n"],"names":["useState","username","email","password","confirm_password","registerInfo","setRegisterInfo","errorMessage","setErrorMessage","isValid","setIsValid","isPopupActive","setIsPopupActive","mailRegex","RegExp","passwordRegex","togglePopup","setTimeout","navigate","updateInput","e","target","name","value","registerUser","preventDefault","setErrorStatus","test","length","console","log","axios","process","then","catch","err","errorInput","inputName","remove","window","document","querySelector","classList","add","setAttribute","FormField","onChange","nameId","content","type","style","marginRight","ErrorText","Button","onClick","isLong","to","NotificationPopup","isActive","RegisterWrapper","styled","theme","colors","base","JoinPanelWrapper","otherStyles","smallRadius","shadow","white","JoinHeader","fontColor","JoinForm","JoinLink","Link","darkGrey","ColoredText","accent","PasswordInfoText"],"sourceRoot":""}